<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-searchbar mode='ios' placeholder="Buscar Pelicula, Serie, Actor/Actriz" animated (ionChange)="onSearch($event)"
      [debounce]="700"></ion-searchbar>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-grid *ngIf="searching">
    <ion-row>
      <ion-col text-center>
        <ion-spinner name="crescent"></ion-spinner>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid fixed>
    <ion-row>
      <ion-col size="6" *ngFor="let result of results">

        <ng-container *ngIf="result.media_type === 'person'; else movieTvshow">
          <ion-card (click)="searchDetails(result.id, result.media_type )">
            <img *ngIf="!result.profile_path" src="/assets/no-avatar.jpg">
            <img *ngIf="result.profile_path" [src]="result.profile_path | image">
            <ion-card-header>
              <ion-card-subtitle> Persona </ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <h2>{{ result.name }}</h2>
            </ion-card-content>
          </ion-card>
        </ng-container>


        <ng-template #movieTvshow>
          <ion-card (click)="searchDetails(result.id, result.media_type )">
            <img [src]="result.poster_path | image">
            <ion-card-header>
              <ion-card-subtitle *ngIf="result.media_type === 'movie'"> Pelicula </ion-card-subtitle>
              <ion-card-subtitle *ngIf="result.media_type === 'tv'"> Serie </ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <h2 *ngIf="result.media_type === 'movie'"> {{result.title}} </h2>
              <h2 *ngIf="result.media_type === 'tv'"> {{result.name}} </h2>
            </ion-card-content>
          </ion-card>
        </ng-template>
      </ion-col>
    </ion-row>
  </ion-grid>

  <div *ngIf="results.length === 0">

    <ion-grid fixed>
      <ion-row>
        <ion-col>
          <h3>Pel√≠culas Populares</h3>
        </ion-col>
      </ion-row>
    </ion-grid>

    <app-slides-poster mediaType="movie" [movies]="popularMovies" (loadMore)="loadMore('popularMovies')">
    </app-slides-poster>

    <ion-grid fixed>
      <ion-row>
        <ion-col>
          <h3>Series Populares</h3>
        </ion-col>
      </ion-row>
    </ion-grid>

    <app-slides-poster mediaType="tvshow" [tvShows]="popularTVShows" (loadMore)="loadMore('popularTVShows')">
    </app-slides-poster>

    <ion-grid fixed>
      <ion-row>
        <ion-col>
          <h3>Series de Netflix</h3>
        </ion-col>
      </ion-row>
    </ion-grid>

    <app-slides-poster mediaType="tvshow" [tvShows]="netflixTVShows" (loadMore)="loadMore('popularNetflixTVShows')">
    </app-slides-poster>
  </div>

</ion-content>